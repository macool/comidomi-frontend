form(
  name="pfaVm.addressForm"
  ng-submit="pfaVm.processAddress(pfaVm.addressFormData)"
  novalidate
)
  ion-content.addresses-page.resource-form(
    locking="false"
  )
    .row
      maps(
        lat="pfaVm.addressFormData.lat"
        lon="pfaVm.addressFormData.lon"
        default-in-current-geolocation="pfaVm.defaultInCurrentGeolocation"
        direccion="pfaVm.addressFormData.direccion_uno"
        direccion-dos="pfaVm.addressFormData.direccion_dos"
        referencia="pfaVm.addressFormData.referencia"
        geolocation-message-key="pfaVm.geolocationMessageKey"
      )
      show-error(array-messages='pfaVm.messages.lat || pfaVm.messages.lon')
      .text-stable {{ pfaVm.geolocationMessageKey | translate }}

    .form-address
      label.item.item-input.item-stacked-label(
        ng-class="{'item-error': pfaVm.messages.direccion_uno}"
      )
        span.input-label
          | {{::("addresses.addressOne"|translate)}} *
        input(
          type='text'
          ng-model='::pfaVm.addressFormData.direccion_uno'
          placeholder='{{ ::("addresses.addressOnePlaceholder" | translate) }}'
          required
        )
      .errors-wrapper
        show-error(array-messages='pfaVm.messages.direccion_uno')

      label.item.item-input.item-stacked-label(
        ng-class="{'item-error': pfaVm.messages.direccion_dos}"
      )
        span.input-label {{::("addresses.addressTwo"|translate)}}
        input(
          type='text'
          ng-model='pfaVm.addressFormData.direccion_dos'
          placeholder='{{ ::("addresses.addressTwoPlaceholder" | translate) }}'
        )
      .errors-wrapper
        show-error(array-messages='pfaVm.messages.direccion_dos')

      label.item.item-input.item-stacked-label(
        ng-class="{'item-error': pfaVm.messages.referencia}"
      )
        span.input-label {{::("addresses.reference"|translate)}}
        input(
          type='text'
          ng-model='pfaVm.addressFormData.referencia'
          placeholder='Ej: casa amarilla, segundo piso'
        )
      .errors-wrapper
        show-error(array-messages='pfaVm.messages.referencia')

      label.item.item-input.item-stacked-label(
        ng-class="{'item-error': pfaVm.messages.nombre}"
      )
        span.input-label {{::("addresses.name"|translate)}}
        input(
          type='text'
          ng-model='pfaVm.addressFormData.nombre'
          placeholder='{{ ::("addresses.namePlaceholder" | translate) }}'
        )
      .errors-wrapper
        show-error(array-messages='pfaVm.messages.nombre')

  ion-footer-bar.bar-stable.bar-footer--tall
    button.button-full.button-main(
      type="submit"
      ng-disabled="pfaVm.addressFormData.$invalid"
    ) {{ ::pfaVm.inUpdateMode ? ("addresses.updateBtnText"|translate) : ("addresses.saveBtnText"|translate) }}
